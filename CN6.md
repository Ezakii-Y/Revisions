<!-- title: A test html -->

## DS7

==背诵==标志：✅。==易错==标志：🔨

#### 局域网的基本概念和体系结构✅

**局域网**(Local Area Network, LAN)是指在较小地理范围内将各种计算机、外部设备和数据库系统通过双绞线、同轴电缆等连接介质互相连接起来，组成资源和信息共享的计算机互联网络。

特点如下：

1. 为一个单位所拥有，且地理范围和站点数量均有限。
2. 所有站点共享较高的总带宽。
3. 较低的时延和较低的误码率。
4. 各站为平等关系。
5. 能进行广播和多播。

局域网的特性主要由三个要素决定：**拓扑结构**、**传输介质**[^1]、**介质访问控制方式**，其中介质访问控制方式最重要[^2]。

局域网的介质访问控制方法主要有CSMA/CD协议、令牌总线协议和令牌环协议[^3]。

三种特殊的局域网拓扑实现如下：

1.  **以太网**(目前适用范围最广)。逻辑拓扑总线形，物理拓扑星形。
2. **令牌环**(Token Ring, IEEE 802.5)。逻辑拓扑环形，物理拓扑星形。
3. **FDDI**(光线分布数字接口, IEEE 802.8)。逻辑拓扑环形，物理拓扑双环。

IEEE 802标准将数据链路层拆分为两个子层：**逻辑链路控制**(LLC)子层[^4]和**介质访问控制**(MAC)子层。MAC层的主要功能有：组帧和拆卸帧、比特传输差错检测、透明传输。

#### 以太网和IEEE 802.3✅

以太网严格来说指符合DIX Ethernet V2标准的局域网，但由于此标准和IEEE 802.3标准相差很小，因此通常将802.3局域网简称为**以太网**。

以太网采用两项措施简化通信：

1. 采用无连接的工作方式，不对数据帧编号，也不要求接收方发送确认，尽最大努力交付数据，提供的是不可靠服务，对差错的纠正由高层完成。
2. 发送的数据使用曼切斯特编码，每个码元中间出现一次电压转换，接收方利用这种电压转换方式方便将同步信号提取出来。

| 标准名称  | 10BASE5 | 10BASE2 | 10BASE-T | 10BASE-F |
| ----- | :-----: | :-----: | :------: | :------: |
| 传输介质  | 同轴电缆(粗) | 同轴电缆(细) |  非屏蔽双绞线  |   光线对    |
| 拓扑结构  |   总线形   | 总线形 |    星形    |   点对点    |
| 最大段长  |  500m   |  185m   |   100m   |  2000m   |
| 最多节点数 |   100   |   30    |    2     |    2     |

计算机与外界局域网的连接由主板上嵌入的**网络适配器**(Adapter)实现[^5]。当计算机要发送IP数据包时，就由协议栈将IP数据包向下交给适配器，组帧后发送到局域网。

IEEE 802标准为局域网规定了一种48位的全球地址，固化在网络适配器的ROM中，称为**物理地址**或**MAC地址**，该地址不会因地理位置变化而变化，长度6字节[^6]。

适配器从网络上每收到一个MAC帧，首先都要用硬件检查MAC帧中的目的地址。若是发往本站的帧，收下；否则丢弃。“发往本站的帧”包括以下三种：

1. 单播帧，目的地址与本站MAC地址相同。
2. 广播帧，全1地址。
3. 多播帧，发送给局域网上一部分站点。

#### 以太网V2标准的MAC帧格式

帧前插入8字节前导码，前7字节为前同步码，用于实现MAC帧的**比特同步**；最后一个字节为帧开始定界符。

目的地址：6字节，帧在局域网上的目的适配器的MAC地址。
源地址：6字节，传输帧到局域网上的源适配器的MAC地址。
类型：2字节，指出数据字段中的数据应交给哪个上层处理。
数据：46~1600字节，以太网MTU为1500字节，若IP数据报超过1500字节，则必须将IP数据报分片，另外最小**帧长**为64字节，这意味着数据部分不得少于46字节，如果少于则在数据字段后面加一个整数字节的填充字段。
检验码(FCS)：4字节，检验范围从目的地址到数据字段，采用32位CRC码，不检验前导码。

802.3帧用长度域代替了V2帧中的类型域。

#### 高速以太网


| 标准名称   |  100BASE-T  |   吉比特以太网    | 10吉比特以太网 |
| ------ | :---------: | :---------: | :------: |
| 传输介质   |     双绞线     |   双绞线或光纤    |  双绞线或光纤  |
| 通信方式   |   半双工/全双工   |   半双工/全双工   |  只有全双工   |
| 介质访问控制 | 半双工下CSMA/CD | 半双工下CSMA/CD |    无     |

100BASE-T以太网将一个网段的最短长度减小到100m，帧间最小间隔从原来的$9.6\mu s$改为$0.96\mu s$。

#### IEEE 802.11 无线局域网✅

无线局域网分为**有固定基础设施**和**无固定基础设施**两大类

对于前者，IEEE制定了802.11系列标准[^7]，此标准使用星形拓扑，其中心称为**接入点**(Access Point, AP)，在MAC层使用CSMA/CA协议。使用802.11系列协议的局域网也称Wi-Fi。

802.11标准规定无线局域网的最小构件为**基本服务集**(Basic Service Set, BSS)，包括一个AP和若干移动站。各站通信与本BSS内/外的站点通信时，必须通过本BSS的AP。安装AP时须为其分配一个**服务集标识符**(Service Set IDentifier SSID)和一个信道，SSID指该AP的无线局域网名称。BSS的覆盖范围称为**基本服务区**(Basic Service Area, BSA)。

BSS可以孤立，也可以由AP连接到分配系统(DS)，进而连接到另一个BSS，构成**扩展服务集**(ESS)，ESS还可通过Portal(门户)这一设备为无限用户提供有线连接的以太网接入[^8]。

假定移动站A要和另一个BSS的移动站B通信，则需经过A->AP1->AP2->B，其中AP1为A所在BSS的AP，AP2为B所在BSS的AP。

对于后者，也称**自组网络**，自组网络没有AP，而是由一些平等状态的移动站相互通信组成。自组网络具有自己特定的路由选择协议，可以不和因特网相连。

#### 802.11局域网的MAC帧

802.11帧共有三种类型：数据帧、控制帧和管理帧。

802.11数据帧由以下三部分构成：

1. MAC首部，共30字节。
2. 帧主体，不超过2312字节。
3. FCS，4字节。

802.11数据帧的MAC首部有4个重要的地址字段[^9]，这些字段的内容取决于“去往AP”和“来自AP”这两个字段的数值。

假设一个BSS中的A站向B站发送数据，此时“去往AP=1”而“来自AP=0”，地址1为AP的MAC地址，地址2为A站的MAC地址，地址3为B站的MAC地址。反之，AP收到数据帧后，要发给B站，此时“去往AP=0”而“来自AP=1”，地址1为B站的MAC地址，地址2为AP的MAC地址，地址3为A的MAC地址。

**持续期字段**，CSMA/CA协议中允许发送数据的站点对信道预约时间，将此时间写入持续期字段。
**帧控制字段**，比较重要的是类型字段和子类型字段，这两个字段用于区分帧的功能。

- [DS7](#ds7)
    - [局域网的基本概念和体系结构✅](#局域网的基本概念和体系结构)
    - [以太网和IEEE 802.3✅](#以太网和ieee-8023)
    - [以太网V2标准的MAC帧格式](#以太网v2标准的mac帧格式)
    - [高速以太网](#高速以太网)
    - [IEEE 802.11 无线局域网✅](#ieee-80211-无线局域网)
    - [802.11局域网的MAC帧](#80211局域网的mac帧)

[^1]:双绞线为主流传输介质。
[^2]:它决定了局域网的技术特性。
[^3]:前两者用于总线型局域网，令牌环协议主要用于环形局域网。
[^4]:LLC子层与传输介质无关，向网络层提供无确认无连接、面向连接、带确认无连接、高速传送四种不同的连接服务类型。委员会制定的LLC子层作用已经不大。
[^5]:适配器和局域网的通信通过电缆或双绞线以串行方式进行，而与计算机的通信则通过IO总线以并行方式进行。
[^6]:高24位为厂商代码，低24位为厂商自行分配的适配器序列号，如果路由器同时连接到两个网络上，则需要两个适配器和两个MAC地址。
[^7]:包括802.11a/b/g/n。
[^8]:门户的作用相当于网桥。
[^9]:第4个字段用于自组网络。